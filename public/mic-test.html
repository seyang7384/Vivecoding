<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ˆì´í¬ ìŠ¤í…Œë ˆì˜¤ í™•ì¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        .result {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
            display: none;
        }

        .result.show {
            display: block;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #ddd;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .label {
            font-weight: 600;
            color: #555;
        }

        .value {
            color: #333;
            font-family: 'Courier New', monospace;
        }

        .stereo-yes {
            color: #27ae60;
            font-weight: bold;
            font-size: 18px;
        }

        .stereo-no {
            color: #e74c3c;
            font-weight: bold;
            font-size: 18px;
        }

        .error {
            color: #e74c3c;
            padding: 15px;
            background: #ffe5e5;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¤ ë§ˆì´í¬ ìŠ¤í…Œë ˆì˜¤ í…ŒìŠ¤íŠ¸</h1>
        <p class="subtitle">ì‹œìŠ¤í…œ ë§ˆì´í¬ê°€ ìŠ¤í…Œë ˆì˜¤ë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤</p>

        <button onclick="checkMicrophone()">ğŸ” ë§ˆì´í¬ í™•ì¸í•˜ê¸°</button>

        <div id="result" class="result">
            <div id="resultContent"></div>
        </div>

        <div id="error" class="error" style="display: none;"></div>
    </div>

    <script>
        async function checkMicrophone() {
            const resultDiv = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            const errorDiv = document.getElementById('error');

            errorDiv.style.display = 'none';
            resultDiv.classList.remove('show');

            try {
                // Request microphone access WITH STEREO
                const stream = await navigator.mediaDevices.getUserMedia({
                    audio: {
                        channelCount: 2, // ğŸ”¥ ëª…ì‹œì ìœ¼ë¡œ ìŠ¤í…Œë ˆì˜¤ ìš”ì²­!
                        sampleRate: 16000,
                        echoCancellation: false,
                        noiseSuppression: false,
                        autoGainControl: false
                    }
                });

                // Get audio track
                const track = stream.getAudioTracks()[0];
                const settings = track.getSettings();
                const capabilities = track.getCapabilities();

                console.log('Settings:', settings);
                console.log('Capabilities:', capabilities);

                // Display results
                const channelCount = settings.channelCount || 1;
                const isStereo = channelCount >= 2;

                resultContent.innerHTML = `
                    <div class="info-row">
                        <span class="label">ë””ë°”ì´ìŠ¤ ì´ë¦„:</span>
                        <span class="value">${settings.deviceId ? 'âœ… ê°ì§€ë¨' : 'â“ ì•Œ ìˆ˜ ì—†ìŒ'}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">ì±„ë„ ìˆ˜:</span>
                        <span class="value">${channelCount} ì±„ë„</span>
                    </div>
                    <div class="info-row">
                        <span class="label">ìƒ˜í”Œë ˆì´íŠ¸:</span>
                        <span class="value">${settings.sampleRate || 'N/A'} Hz</span>
                    </div>
                    <div class="info-row">
                        <span class="label">ì—ì½” ì œê±°:</span>
                        <span class="value">${settings.echoCancellation ? 'âœ…' : 'âŒ'}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">ë…¸ì´ì¦ˆ ê°ì†Œ:</span>
                        <span class="value">${settings.noiseSuppression ? 'âœ…' : 'âŒ'}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">ìë™ ê²Œì¸:</span>
                        <span class="value">${settings.autoGainControl ? 'âœ…' : 'âŒ'}</span>
                    </div>
                    <div class="info-row" style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #999;">
                        <span class="label" style="font-size: 18px;">ğŸ¯ ìŠ¤í…Œë ˆì˜¤ ì§€ì›:</span>
                        <span class="${isStereo ? 'stereo-yes' : 'stereo-no'}">
                            ${isStereo ? 'âœ… ì˜ˆ (ìŠ¤í…Œë ˆì˜¤)' : 'âŒ ì•„ë‹ˆì˜¤ (ëª¨ë…¸)'}
                        </span>
                    </div>
                    ${capabilities.channelCount ? `
                    <div class="info-row">
                        <span class="label">ì§€ì› ê°€ëŠ¥ ì±„ë„:</span>
                        <span class="value">${capabilities.channelCount.min} ~ ${capabilities.channelCount.max}</span>
                    </div>
                    ` : ''}
                `;

                resultDiv.classList.add('show');

                // Stop the stream
                stream.getTracks().forEach(track => track.stop());

            } catch (error) {
                console.error('Error:', error);
                errorDiv.textContent = `ì˜¤ë¥˜: ${error.message}`;
                errorDiv.style.display = 'block';
            }
        }

        // Auto-check on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.querySelector('button').click();
            }, 500);
        });
    </script>
</body>

</html>